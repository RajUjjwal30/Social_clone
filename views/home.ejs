<link rel="stylesheet" href="css/home.css">
<link rel="stylesheet" href="css/chat_box.css">

<div id="home-container">
        <section id="feed-posts">
                <h3>Posts</h3>
        <!-- creating post is visible only when the user is signed -in -->
                <% if(locals.user) {%>
                <form action="/posts/create" id="new-post-form" method="post">
                        <textarea name="content" id="" cols="30" rows="3" placeholder="type here!" required></textarea>
                        <input type="submit" value="Post">
                </form>
                <% } %>
        <!-- for showing posts on home page -->
                <div id="posts-list-container">
                        <ul>
                                <% for(post of posts) {%>
        
                                        <%- include('_post') -%>
                                        
                                <% } %>
                        </ul>
        
                </div>
        
        </section>
        
        <section id="user-friends">
                <h4>Friends</h4>
                <!-- making list of all users and showing them on Homepage-->
                <% for (u of all_users) { %>
                        <p>
                                <!-- previously only my id was displayed in the profile but now profile of all the users will be displayed -->
                                <a href="/users/profile/<%= u.id %>"><%= u.name %></a>
                        </p>
                        
                <% } %>
        </section>

        <%- include('_chat_box') -%>

</div>
<script src="/js/home_posts.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
<script src="/js/chat_engine.js"></script>

<!-- initializing the chatEngine class -->

<%  if (locals.user) { %>
<script >
       
        new ChatEngine('user-chat-box', '<%= locals.user._id %>')
</script>
<% } %>

        